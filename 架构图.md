# BioLitKG 架构图

## 系统架构

```mermaid
graph TB
    subgraph "用户交互层"
        A[analyze.py<br/>交互式对话界面]
    end
    
    subgraph "文献搜索层"
        B1[arXiv Client<br/>预印本搜索]
        B2[PubMed Client<br/>生物医学搜索]
        B3[Unified Search<br/>统一搜索接口]
        B1 --> B3
        B2 --> B3
    end
    
    subgraph "数据增强层"
        C[Citation Enricher<br/>Semantic Scholar<br/>引用数补充]
    end
    
    subgraph "分析引擎层"
        D1[Workflow Analyzer<br/>工作流程分析器]
        D2[LLM Provider<br/>AI分析接口]
        D1 --> D2
    end
    
    subgraph "可视化层"
        E1[Workflow Visualizer<br/>网络图生成器]
        E2[Statistical Charts<br/>统计图表生成]
        E1 --> E2
    end
    
    subgraph "输出层"
        F1[Markdown Report<br/>详细报告]
        F2[Interactive Network<br/>交互式网络图]
        F3[Statistical HTML<br/>统计图表]
        F4[Papers List<br/>论文清单]
    end
    
    A -->|1.搜索文献| B3
    B3 -->|2.补充引用数| C
    C -->|3.提取流程| D1
    D1 -->|4.可视化| E1
    E1 -->|5.输出| F1
    E1 -->|5.输出| F2
    E2 -->|5.输出| F3
    D1 -->|5.输出| F4
    
    style A fill:#FFE5E5
    style B3 fill:#E5F5FF
    style C fill:#FFF5E5
    style D1 fill:#E5FFE5
    style E1 fill:#F5E5FF
    style F1 fill:#FFE5F5
```

---

## 数据流图

```mermaid
flowchart LR
    A[用户输入<br/>对话参数] --> B[文献搜索<br/>arXiv+PubMed]
    B --> C[论文列表<br/>标题/摘要]
    C --> D[引用数补充<br/>Semantic Scholar]
    D --> E[论文筛选<br/>年份/引用数]
    E --> F[步骤提取<br/>关键词匹配]
    F --> G[AI分析<br/>LLM生成]
    G --> H[知识图谱<br/>构建网络]
    H --> I[可视化<br/>PyVis+Plotly]
    I --> J[5个输出文件]
    
    style A fill:#4ECDC4,color:#000
    style D fill:#FFE66D,color:#000
    style G fill:#FF6B6B,color:#fff
    style I fill:#95E1D3,color:#000
    style J fill:#F38181,color:#fff
```

---

## 核心模块

```mermaid
graph TD
    subgraph "Core Modules"
        A[literature<br/>文献搜索]
        B[workflow<br/>流程分析]
        C[core<br/>LLM&配置]
        D[models<br/>数据模型]
        E[utils<br/>工具集]
    end
    
    subgraph "Key Features"
        F1[Interactive<br/>对话式交互]
        F2[Citation<br/>引用数补充]
        F3[Visualization<br/>知识图谱]
        F4[AI Analysis<br/>智能分析]
    end
    
    A --> F1
    A --> F2
    B --> F3
    B --> F4
    C --> F4
    E --> F2
    
    style F1 fill:#FFB6C1
    style F2 fill:#87CEEB
    style F3 fill:#98FB98
    style F4 fill:#DDA0DD
```

---

## 技术栈

```mermaid
mindmap
  root((BioLitKG))
    文献搜索
      arXiv API
      Biopython/PubMed
      Semantic Scholar
    AI分析
      OpenAI API
      通义千问
      GPT系列
    数据处理
      NetworkX
      Pandas
      NumPy
    可视化
      PyVis 网络图
      Plotly 统计图
      HTML交互
    用户界面
      交互式对话
      参数配置
      中文提示
```

---

## 工作流程

```mermaid
sequenceDiagram
    participant U as 用户
    participant A as analyze.py
    participant L as Literature Search
    participant C as Citation Enricher
    participant W as Workflow Analyzer
    participant V as Visualizer
    
    U->>A: 输入参数(对话)
    A->>L: 搜索文献
    L-->>A: 返回论文列表
    A->>C: 补充引用数
    C-->>A: 更新引用数
    A->>W: 分析工作流程
    W->>W: 提取步骤和工具
    W->>W: LLM生成最佳实践
    W-->>A: 返回分析结果
    A->>V: 生成可视化
    V-->>A: 网络图和统计图
    A->>U: 输出5个文件
```

---

## 使用这些图

### 公众号文章中
- 使用"系统架构图"展示整体设计
- 使用"数据流图"说明工作流程

### GitHub README中  
- 使用"核心模块图"
- 使用"技术栈图"

---

## PNG导出说明

使用在线工具将Mermaid图导出为PNG:
1. 访问: https://mermaid.live/
2. 粘贴对应的mermaid代码
3. 点击"Download PNG"
4. 用于公众号配图

或使用VSCode Mermaid插件直接导出。

